shell的if语句对空格方面的要求比较严格，如果在需要空格的地方没有打上空格，都会报错。如

```bash
if [ $1x == "ip"x ];then 
    echo "abc";
fi
```

上例子中少一个空格都会报错。另外shell的if语句必须以fi作为结尾，不然同样会报错。

# if中对比

## 对比字符串

对比字符串只能使用==、<、>、!=、-z、-n。

对比字符串时，末尾一定要加上x（或者a、b等）一个字符，因为

```bash
if [ $1x == "ab"x ]     //如果没有了x ，并且$1是""，变成下一句语句
if [  == "ab" ]         //左边相当于没有东西了，会报语法错误
```

- **使用`[[  ]]`，就不需要x了。**
- **使用<或者>时，如果是用`[  ]`，需要用转义符"\"，如\>。**

## [和[[的区别

1. 区别一。在[中使用逻辑运算符，需要使用-a（and）或者-o（or）。在[[中使用逻辑运算符，需要使用&&或者||。

2. 区别二。[是shell命令，在它包围的表达式是它的命令行参数，所以串比较符>和<需要转义，否则就变成io重定向了。[[是shell关键字，不会做命令行扩展，所以<和>不需要进行转义。但是语法相对严格，如在[中可以用引号括起操作符，[[则不行。如if [ "-z" "ab" ]。

3. 区别三。[[可以做算术扩展，[则不行。如

```bash
if [[ 11+1 -eq 100 ]]
if [ 11+1 -eq 100 ] //会报错
```

| 参数                  | 描述               |
| ------------------- | ---------------- |
| if [ str1 = str2 ]  | 当两个串有相同内容、长度时为真  |
| if [ str1 != str2 ] | 当串str1和str2不等时为真 |
| if [ -n str1 ]      | 当串的长度大于0时为真(串非空) |
| if [ -z str1 ]      | 当串的长度为0时为真(空串)   |
| if [ str1 ]         | 当串str1为非空时为真     |

**shell 中利用 -n 来判定字符串非空。**

## 对比数字

对比数字既能使用-eq、-ne、-gt、-ge、-lt、-le，也能使用==、<、>、!=。其中：

| 参数  | 描述                       |
| --- | ------------------------ |
| -eq | equal                    |
| -ne | unequal                  |
| -gt | greater than             |
| -ge | greater than or equal to |
| -lt | less than                |
| -le | less than or equal to    |

# 使用正则表达式

if在对比时可以使用正则表达式。

```bash
if [[ $1 == a*a ]]
或者
if [ $1x == a*ax ]
```

如果使用""把a\*a包围起来，\*就会变成字符\*，而不是正则表达式中的\*。

# 文件判断

 在高级语言中，判断文件是否存在等各种状态都是需要调用特定的函数进行判断。而在shell中，这方面就比较方便些，只需要运算符即可。常用的文件判断运算符如下:

| 参数        | 描述                               |
| --------- | -------------------------------- |
| -e        | 文件是否存在                           |
| -f        | 文件是否是普通文件（不是目录、设备文件、链接文件）        |
| -s        | 表示文件大小不为0                        |
| -d        | 表示文件是否是目录                        |
| -b        | 表示是块设备（光驱、软盘等）                   |
| -c        | 表示是字符设备（键盘、声卡等）                  |
| -p        | 表示是管道                            |
| -h        | 表示是符号链接                          |
| -S        | 表示是否是socket                      |
| -r、-w、-x  | 表示文件是否有可读、可写、可执行权限（指运行这个测试命令的用户） |
| f1 -nt f2 | f1是否比f2新（new than）               |
| f1 -ot f2 | f1是否比f2旧（old than）               |
| f1 -ef f2 | f1和f2是否是相同文件的硬链接                 |
| !         | 表示上述结果取反                         |
