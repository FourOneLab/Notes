# 需要用的的网站：

1. [Github](https://github.com)
2. [Google Cloud Platfrom](https://console.cloud.google.com/gcr/images/google-containers/GLOBAL)
3. [aliyun](https://account.aliyun.com)
4. [quay](https://quay.io/search)
4. [Docker Hub](https://hub.docker.com/)

> 谷歌云平台和quay都可以，主要就是用来查看我们需要的海镜像。

> 阿里云和Docker Hub 都有托管的镜像build功能，阿里云是国内的速度肯定更快。

# Github
- 在Github上创建一个仓库，这个仓库用于存储镜像的Dockerfile文件。
- 也可以fork别人的仓库。

# Google Cloud Platfrom
## 作为镜像查询平台
在谷歌云平台上查看需要build的镜像的名称和tag。

登录之后，选择`Container Registry`，这里面保存了所有谷歌的镜像文件。

## 作为镜像迁移平台
### 激活云shell
点击右上角的按钮 `激活Cloud Shell`

> Cloud Shell的使用，参考官方说明，其实就是一台免费的小型云服务器

1. 默认就已经预装了docker，查看版本为`18.03.1-ce`
2. Cloud Shell 有5G的存储空间，基本够用

### 镜像操作
1. 下载海外的镜像，以`k8s.gcr.io/pause:3.1`为例

```bash
docker pull k8s.gcr.io/pause:3.1
```
2. 登录阿里云容器镜像服务器
```bash
docker login registry.cn-shanghai.aliyuncs.com/promacanthus 
# 会提示输入密码
```
> 登录账号为阿里云的登录账号，多半为邮箱

> 密码不记得，可以在阿里云的右上角设置Registry密码处修改

3. 修改镜像tag然后push
```bash
docker tag k8s.gcr.io/pause:3.1 registry.cn-shanghai.aliyuncs.com/promacanthus/pause:3.1

docker push registry.cn-shanghai.aliyuncs.com/promacanthus/pause:3.1
```
> 感觉这个过程有点慢，不知道镜像大了会不会更慢

4. 从阿里云pull
```bash
docker pull registry.cn-shanghai.aliyuncs.com/promacanthus/pause:3.1
```

# aliyun
阿里云是用来进行镜像编译和保存的，编译完成后，镜像就保存在阿里云的服务器上，直接从这里下载需要的海外镜像就可以。

1. 创建命名空间
2. 创建仓库，创建的时候选择GitHub，勾选`海外机器构建`
3. 进入对应的仓库，在构建页面中进行规则的设置，点击`添加规则`
4. 规则创建完成后即可开始构建


构建的过程比较的缓慢，不如谷歌云平台直接迁移来的简单。