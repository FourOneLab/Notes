# 架构的职责
软件的复杂化，对于开发人员的脑力负担也不断增大，而人脑所能处理的信息量是有限的，于是，软件开发工具、开发方法也在不断发展，从汇编语言到高级语言，从函数到框架，从面向过程到面向对象，从设计模式到架构模式……

>人类在软件开发工具的各个维度上都在做着“封装”和“抽象”，架构设计是这种抽象和封装的最高层次。从架构的维度上，已经不需要考虑语言、函数、设计模式这一类的抽象，而是站在整体软件系统的高度上，考虑系统设计的技术合理性，需求实现的完整性，商业诉求的匹配度（主要是成本和效率）——这是**架构的技术职责**。

随着行业的发展，软件项目的参与角色和人员也越来越多，从起初只有程序员和需求方，发展到技术、产品、设计、商务、项目管理多团队，技术团队内部的分工也越来越细化，前端、后端、测试、运维、售前售后技术、集成技术等应运而生。

>架构师是技术团队面向产品设计等团队的接口人，承担着弥合技术与非技术团队之间知识和语言体系差异的职责，同时作为技术团队的带头人，要负责勾勒蓝图，明确边界，让不同技能的团队通力协作，最终完成软件系统的整体建设和发布——这是**架构的组织职责**。

## 架构的技术职责

首先，架构师经常被类比于建筑师，但是有两个建筑领域的基础理念，在软件架构领域是不成立的（至少现阶段不成立）：

建筑设计师在成为建筑设计师之前，是不会成为建筑工人或工程师的。——现阶段的软件架构师，一定是从软件工程师成长起来的。

建筑学和工程学之间的区别表现在“做什么”和“怎么做”：建筑师决定做什么，工程师想出怎么做。——现阶段的软件架构师，除了决定做什么，也要决定关键部分怎么做。

### 架构的技术职责分为三大块：

#### 抽象设计

架构师需要能自由地在不同的抽象层次和视角上分析需求，不同的架构层次/视角提供了不同的视图，这些视图互相验证，又能构成整体的设计大图。架构的抽象层次分成两个维度：

##### 垂直维度
从上到下，分成企业架构、解决方案架构、应用架构、系统架构等，这个分层的逻辑，是提供不同颗粒度的业务建模。


角色 | 职责
---|---
CTO|关注企业架构，它体现了一个企业整体的IT技术建设的战略选择，典型的就是集中式和SOA、大型机和云计算的选择等；
产品经理和运维|关注应用架构，这里映射了产品的业务流程和应用的整体部署依赖；
外部客户|关注解决方案架构，它定义了如何通过产品的整合和协同，解决特定客户的特定的技术方案需求；
研发工程师|关注系统架构，这里定义了单个系统的领域建模和系统框架。

##### 水平维度
具体到对某一个业务的架构设计，又可以区分出业务架构、数据架构、技术架构、应用架构几个不同的视角。
角色 | 职责
---|---
业务架构|对业务领域和业务流程的分析抽象，需要提炼出业务的核心领域模型，业务的可变和不变部分，这是架构师和产品经理协同完成的；
数据架构|基于业务架构提炼的核心领域模型做数据模型和存储模型的设计；
技术架构|基于业务的性能，可用性，安全等非功能性指标，确定语言、框架、中间件、部署等技术选型；
应用架构|基于业务抽象设计应用系统的层次结构、系统边界等。

在这些架构划分中，企业架构匹配商业模式，业务架构匹配业务模式，其他几个架构的划分，更多的是从技术的不同视角来看，他们提供了从不同的抽象层次，不同的切面对于功能需求的分析和建模。

同时需要说明的是，架构的抽象是匹配于业务的，就像桥梁设计师不能直接转做摩天大楼设计，架构抽象也是区分领域的，每一个业务领域都有自己的独特性，因此在架构上也是千人千面的，好的架构设计也是对于业务抽象得最好的设计。

#### 非功能设计

这也是“架构服务于功能，高于功能”的含义。这里的非功能性需求包括了软件系统的可靠性、扩展性、可测性、数据一致性、安全和性能等。考虑到成本和运行环境等限制，这些非功能性需求很多时候是不能同时满足的。这个时候就需要“权衡”，空间换时间的算法层面的权衡，性能和可测性、可靠性的权衡，一些权衡甚至上升到了学术层面，变成无完美架构的理论根基（如CAP理论）。

#### 关键技术设计

架构师的最后一个技术职责是关键技术设计。建筑师不只是做整体外观设计的，建筑师也需要考虑关键部分的细节设计——曾经在巴塞罗那圣家堂，我甚至看到高迪连教堂里一把椅子都留下了详细的设计图纸。同理，架构师也需要对可能影响到软件系统整体质量的关键部分，做更细节的详细设计。

## 架构的组织职责

架构师是企业的一员，作为“边界人”，承担着在不同角色、团队之间沟通协调的作用。

### 和业务、产品团队的协作

软件系统是解决现实世界的问题的，任何的软件系统都是业务相关的，当一个软件系统的商业模式确定之后，架构师就开始和业务、产品团队紧密合作，确定软件系统的业务架构和领域模型。业务和领域模型抽象的好坏，决定了软件产品是一次性的解决方案，还是可以持续支撑业务成长的真正的产品。

需要说明的是，业务、产品方和架构师是需求方和实施方的关系，所以，双方之间既是合作的关系，有时候也是谈判双方的关系，特别是对于外包型的软件产品而言，这个时候，架构师又承担着在业务方和技术团队之间找到诉求契合点的重任。

### 和技术团队的协作

研发阶段，有架构师参与的项目，往往牵涉多个不同方向，不同业务领域的研发团队。架构在其中的作用，是整体大图的传导，以及应用和团队研发边界的划分，对于影响到整体的非功能需求的关键技术点，架构师也要能亲力亲为完成设计。归根结底，架构师为软件系统的整体质量负责，也为研发团队的研发分工负责。

部署阶段，架构师需要和运维团队一起评估满足整体非功能需求的前提下，软件系统部署的硬件成本和部署拓扑结构。例如对于互联网应用，针对性能要求，是否需要CDN，带宽需求；针对可靠性，是否需要多机房部署；针对安全，是否部署相关的安全软件。最终的部署策略，仍然是基于成本和需求的一个权衡。

技术团队是架构师的大本营。根据不同公司的职能定位不同，有的架构师立足于技术团队，有的游离于技术团队。立足技术团队使架构师能更深入了解团队所负责的产品，因此能对业务做更合理的建模，也有利于架构师对关键技术方案做针对性设计，但是可能会限制了架构师拥有更加全局的视角。游离于技术团队的架构师能够从全局看待软件设计而不受制于屁股，因此更能从客观合理的角度规划整体设计，但是由于对技术团队没有管理职能，对于方案的落地只能依靠个人的技术号召力，而且，游离意味着疏远，如果架构师不能自觉地去跟进软件产品的实际落地，可能慢慢就会架空，变成PPT架构师。

简言之，架构师既不能完全负责某个技术团队，也不能完全游离在技术团队之外，这个，又是一个职能定位的权衡了。

同时，架构师和技术团队的协作，还有一个很重要的组织职能。如前述，架构师既决定了整体的架构选型，也决定了关键的技术方案的设计，而什么是需要架构师亲力亲为的关键技术方案，是架构师来确定的。因此，这就引申出架构师的另一个重要的组织职能——团队培养。如果架构师完成所有的技术方案设计，研发团队只管写代码，架构师会累死，研发团队也不会成长，这就要求架构师给予研发团队足够的成长空间和信任，并因此承担一定的风险和责任，这是这个角色必须承担的。

### 和其他角色的协作

除了产品和技术团队，架构师需要协作的还有项目经理，外部客户，甚至是公司财务……一句话，架构师作为技术方案的总负责人，对接所有对技术方案有关联关系的合作方。

### 如何沟通

协作就需要沟通，架构需要掌握多门沟通语言，而最好的语言是图表。对于产品来说，架构师沟通的工具是业务架构，用例和领域模型；对于研发团队来说，架构师沟通的工具是应用架构，组件和时序图；对于运维团队来说，沟通的语言又成了部署架构。图表的作用是维护共同的语言，同时也是让设计文档化以便于传承。